<%-include('../layouts/header.ejs')%>
<%-include('../layouts/navbar.ejs')%>

<style>
    .text-red {
        color: red;
    }
    .small-text {
        font-size: 12px; /* Adjust the font size as needed */
    }

    .password-wrapper {
        position: relative;
    }
    .form-control {
    border: 1px solid #000;
    border-radius: 5px;
    padding: 10px;
    margin-bottom: 20px;
}
    .password-icon {
        position: absolute;
        top: 50%;
        right: 10px;
        transform: translateY(-50%);
        cursor: pointer;
    }

    .password-rules {
        display: none;
        margin-top: 5px;
        font-size: 12px;
        color: #999;
    }
    .button-container {
    text-align: center;
    display: flex;
    justify-content: center;
}

.btn-outline-primary-2 {
    border: 1px solid black; /* Black border */
    color: black; /* Black text */
    background-color: transparent; /* Transparent background */
}
.google-account {
    text-align: center;
    border: 1px solid black;
    color: blue;
}
.btn-outline-primary-2:hover {
    background-color: black; /* Change background color on hover */
    color: white; /* Change text color on hover */
}
.forgot-link {
    color: black !important; /* Change link color to black */
}
.red-btn {
    
    color: red;
}

</style>

<div class="page-wrapper">
    <main class="main">

        <div class="login-page bg-image pt-8 pb-8 pt-md-12 pb-md-12 pt-lg-17 pb-lg-17" style="background-image: url('assets/images/backgrounds/login-bg.jpg')">
            <div class="container">
                <div class="form-box">
                    <div class="form-tab">
                        <div class="text-center">
                            <img src="/assets/images/logo.png" alt="RUSH GAMES LOGO" width="150px" height="150px" style="display: block; margin: 0 auto;">
                        </div>
                        <ul class="nav nav-pills nav-fill" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active" id="register-tab-2" data-toggle="tab" href="#register-2" role="tab" aria-controls="register-2" aria-selected="true">Change the Password</a>
                            </li>
                        </ul>
                        <% if (errmsg) { %>
                            <div class="alert alert-danger text-center" role="alert" style="color: red; background: white;">
                                <%= errmsg %>
                            </div>
                        <% } %>
                        <div class="tab-content">
                            <div class="tab-pane fade show active" id="register-2" role="tabpanel" aria-labelledby="register-tab-2">
                                <form method="post" action="/changePasswordSubmit" onsubmit="return validation()">     
                                    <div class="form-group">
                                        <label for="password">Enter New Password</label>
                                        <input type="password" class="form-control" id="password" name="password" >
                                        <p id="errorPassword" style="color: red"></p>
                                    </div><!-- End .form-group -->

                                    <div class="form-group">
                                        <label for="confirmPassword">Confirm Password</label>
                                        <div class="password-wrapper">
                                            <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" >
                                            <input type="text" value="<%= email %>" name="email" hidden>
                                            <p id="errorConfirmPassword" style="color: red;"></p>
                                        </div>
                                       
                                    </div>
                                    <br><br>

                                    <div class="form-footer">

                                        <!-- Top button container -->
                                        <div class="button-container col-md-12">
                                            <button type="submit" class="btn btn-outline-primary-2">
                                                <span>SUBMIT</span>
                                                <i class="icon-long-arrow-right"></i>
                                            </button>
                                            
                                        </div>

                                    </div><!-- End .form-footer -->
                                    
                                </form>
 
                            </div><!-- .End .tab-pane -->
                        </div><!-- End .tab-content -->
                    </div><!-- End .form-tab -->
                </div><!-- End .form-box -->
            </div><!-- End .container -->
        </div><!-- End .login-page section-bg -->
    </main><!-- End .main -->
</div><!-- End .page-wrapper -->

<button id="scroll-top" title="Back to Top"><i class="icon-arrow-up"></i></button>



<!-- validation-->
<script>
function validation(){


        
let password = document.getElementById("password").value.trim();
let confirmPassword = document.getElementById("confirmPassword").value.trim();

let passwordRegex = /^.{5,}$/;
let confirmPasswordRegex = /^.{5,}$/;

let errorPassword = document.getElementById("errorPassword");
let errorConfirmPassword = document.getElementById('errorConfirmPassword')

errorPassword.innerText = "";
errorConfirmPassword.innerText = "";



    // ****** VALIDATE PASSWORD ******
    if (password === "") {
        errorPassword.innerText = "Password cannot be empty";
        return false;
    } else if (!passwordRegex.test(password)) {
        errorPassword.innerText = "Password must be at least 5 characters long";
        return false;
    }

     // ****** VALIDATE CONFIRM PASSWORD ******
     if (confirmPassword === "") {
        errorConfirmPassword.innerText = "Password cannot be empty";
        return false;
    } else if (!confirmPassword.test(confirmPassword)) {
        errorConfirmPassword.innerText = "Password must be at least 5 characters long";
        return false;
    }

    return true;
}
</script>




<%-include('../layouts/footbar.ejs')%>
<%-include('../layouts/footer.ejs')%>